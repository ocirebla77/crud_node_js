<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h2>Vertical (basic) form</h2>
      <form id="form">
        <!-- <form  action="/action_page.php"> -->
        <div class="form-group">
          <label for="nome">nome:</label>
          <input
            type="text"
            class="form-control"
            id="nome"
            placeholder="Coloque o nome"
            name="nome"
          />
        </div>
        <div class="form-group">
          <label for="sobrenome">sobrenome:</label>
          <input
            type="text"
            class="form-control"
            id="sobrenome"
            placeholder="Coloque o sobrenome"
            name="sobrenome"
          />
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input
            type="email"
            class="form-control"
            id="email"
            placeholder="Coloque o email"
            name="email"
          />
        </div>
        <div class="form-group">
          <label for="senha">Senha:</label>
          <input
            type="password"
            class="form-control"
            id="senha"
            placeholder="Coloque a senha"
            name="senha"
          />
        </div>
        <div class="form-group">
          <label for="senha2">Senha:</label>
          <input
            type="password"
            class="form-control"
            id="senha2"
            placeholder="Confirme a senha"
            name="senha2"
          />
        </div>
        <!-- <div class="checkbox">
          <label><input type="checkbox" name="remember" /> Remember me</label>
        </div> -->
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
    </div>
    <script>
      axios
        .get("http://localhost:3000/pessoas", {
          headers: {
            accepts: "application/json",
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            methods: ["GET", "POST"],
          },
        })
        .then((response) => console.log(response))
        .catch((error) => console.log(error));

      let form = document.getElementById("form");
      let nome = document.getElementById("nome");
      let sobrenome = document.getElementById("sobrenome");
      let email = document.getElementById("email");
      let senha = document.getElementById("senha");
      let senha2 = document.getElementById("senha2");

      //   const url = 'http://localhost:3000/pessoas';

      //   fetch(url).then((resp)=>resp.json).then(
      //       function(data){
      //           let resposta = data.results;
      //           console.log('resposta',resposta)
      //       }
      //   )

      console.log("form", form);
      console.log("nome", nome);
      console.log("sobrenome", sobrenome);
      console.log("email", email);
      console.log("senha", senha);
      console.log("senha2", senha2);

      form.addEventListener("submit", (e) => {
        // criaPessoa();
        e.preventDefault();
        handleSubmit(e);

        console.log("button clicked");

        formValidation();
      });

      let formValidation = () => {
        console.log("form.value", form.value);
        console.log("nome.value", nome.value);
        console.log("sobrenome.value", sobrenome.value);
        console.log("email.value", email.value);
        console.log("senha.value", senha.value);
        console.log("senha2.value", senha2.value);
        // if (input.value === "") {
        //   msg.innerHTML = "Post cannot be blank";
        //   console.log("failure");
        // } else {
        //   console.log("successs");
        //   msg.innerHTML = "";
        // }
      };

      function handleSubmit(e) {
        e.preventDefault();
        const formData = new FormData(e.target);
        const formProps = Object.fromEntries(formData);
        console.log("formData", formData);
        console.log("formProps", formProps);
        criaPessoa(formProps);
      }

      function criaPessoa(formProps) {
        console.log("CRIAPESSOA");
        axios({
          method: "post",
          url: "http://localhost:3000/pessoas",
          data: formProps
        })
          .then((response) => console.log(response))
          .catch((error) => console.log(error));
      }
    </script>
  </body>
</html>
